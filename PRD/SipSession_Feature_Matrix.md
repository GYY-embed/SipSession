# SipSession 功能表格（MVP）

> 说明：用于方案设计与功能验收对齐；三级功能为最小可验收单元。

| 一级功能 | 二级功能 | 三级功能 | 功能描述 | 优先级 | 目标版本 |
|---|---|---|---|---|---|
| 酒局生命周期 | 开始 | 一键开局 | iPhone 端一键开始酒局，进入进行中状态 | P0 | MVP |
| 酒局生命周期 | 进行中控制 | 暂停/继续 | iPhone 或 Watch 端可切换暂停/继续，双向同步 | P0 | MVP |
| 酒局生命周期 | 结束 | 手动结束 | 任一端二次确认结束，进入终态 | P0 | MVP |
| 酒局生命周期 | 结束 | 自动结束 | 无记录超时或离腕触发自动结束，并记录原因 | P0 | MVP |
| 酒局生命周期 | 开局方式 | Watch 独立开局 | Watch 可独立开局，使用 Fallback 模板 | P0 | MVP |
| 酒局生命周期 | 开局方式 | iPhone 独立开局 | iPhone 可独立开局并同步模板到 Watch | P0 | MVP |
| 酒局生命周期 | 接管 | iPhone 接管 | iPhone 任意时刻可接管当前 Session 并调整模板 | P0 | MVP |
| 酒局生命周期 | 追溯 | 结束原因 | 结束原因可追溯（ended_reason） | P0 | MVP |
| Watch 开局 | 默认入口 | 开始按钮 | 无进行中 Session 时显示开始按钮 | P0 | MVP |
| Watch 记录与展示 | 中间页 | 心率显示 | 实时心率 bpm + 趋势指示（↑/→/↓） | P0 | MVP |
| Watch 记录与展示 | 中间页 | 计杯记录 | `+1` 计杯，默认饮品可切换 | P0 | MVP |
| Watch 记录与展示 | 中间页 | 排尿记录 | `🚻 +1` 手动记录排尿事件 | P0 | MVP |
| Watch 记录与展示 | 左页 | 控制入口 | 暂停/继续、结束（含二次确认） | P0 | MVP |
| Watch 记录与展示 | 右页 | 汇总展示 | 杯数、酒精 g、液体 ml、排尿次数、时长 | P0 | MVP |
| Watch 记录与展示 | 结束后 | 简要汇总 | 结束后展示简要汇总，提示 iPhone 查看完整报告 | P0 | MVP |
| 心率采集 | 采集机制 | Workout Session | 使用 Workout Session 或等效机制获取高频心率 | P0 | MVP |
| 心率采集 | 采集用途 | 记录关联 | 计杯/排尿记录时写入心率窗口统计 | P0 | MVP |
| iPhone 配置 | 饮品模板 | 预置模板 | MVP 预置 5 种模板：啤酒 330ml、烈酒 15ml、葡萄酒 80ml、鸡尾酒 150ml、软饮 250ml | P0 | MVP |
| iPhone 配置 | 饮品模板 | 选择模板 | 开局前选择本次可用酒类并同步到 Watch | P0 | MVP |
| iPhone 配置 | 喝点什么 | 切换默认 | 酒局进行中允许切换默认饮品（仅影响后续） | P0 | MVP |
| iPhone 配置 | 喝点什么 | 新增饮品 | 酒局进行中允许新增一个饮品进本次列表 | P0 | MVP |
| iPhone 配置 | 喝点什么 | 调整参数 | 酒局进行中允许调整默认容量/ABV（仅影响后续） | P0 | MVP |
| iPhone 配置 | 酒局中模板 | 删除限制 | 不允许删除正在使用的模板 | P0 | MVP |
| iPhone 个人 | Profile | 入口 | 头像/名称、模板配置、程序设置入口 | P0 | MVP |
| iPhone 个人 | 头像与名称 | 上传/设置 | 上传头像并设置名称 | P0 | MVP |
| iPhone 个人 | 模板配置 | 默认设置 | 查看预置模板并设置默认饮品 | P0 | MVP |
| iPhone 个人 | 程序设置 | 设置项 | 通用设置入口（具体项 TBD） | P2 | 1.1 |
| 开局准备 | 酒类选择 | 多选酒类 | 开始前选择本次可用酒类（可多选） | P0 | MVP |
| 开局准备 | 杯量调整 | 临时调整 | iPhone 开局时可临时调整杯量（不改默认） | P0 | MVP |
| 开局准备 | 杯量限制 | Watch 默认 | Watch 端仅使用默认杯量，不支持临时调整 | P0 | MVP |
| iPhone 进行中 | 状态展示 | 实时数据 | 显示时长、杯数、酒精 g、液体 ml、排尿次数 | P0 | MVP |
| iPhone 进行中 | 心率展示 | 最近值 | 显示当前/最近心率，不可用时提示 | P0 | MVP |
| 记录入口 | 饮酒记录 | Watch 记录 | MVP 仅支持 Watch 端饮酒记录 | P0 | MVP |
| 记录入口 | 饮酒记录 | iPhone 记录 | 后续版本支持 iPhone 端饮酒记录 | P2 | 1.1 |
| 调整能力 | 单杯微调 | 进行中 | iPhone 端可微调已记录单杯：杯量/酒精度/名称（仅进行中） | P0 | MVP |
| 调整限制 | 单杯微调 | Watch 端 | Watch 端不支持修改，仅计数与记录 | P0 | MVP |
| 调整限制 | 单杯微调 | 报告后 | 结束后在报告内微调与重算 | P2 | 1.1 |
| iPhone 报告 | 报告生成 | 自动生成 | 结束后自动生成酒局报告 | P0 | MVP |
| iPhone 报告 | 报告内容 | 概览 | 总杯数、酒精 g、液体 ml、排尿次数、时长 | P0 | MVP |
| iPhone 报告 | 报告内容 | 心率摘要 | 平均/峰值心率摘要 | P0 | MVP |
| iPhone 报告 | 报告内容 | 恢复区间 | 基于总酒精估算恢复时间区间 + 免责声明 | P0 | MVP |
| iPhone 报告 | 报告内容 | 头像与名称 | 报告中展示头像与名称 | P0 | MVP |
| iPhone 报告 | 报告分享 | 图片生成 | 生成可分享图片，支持 1–2 种模板（MVP） | P1 | MVP |
| iPhone 报告 | 报告分享 | 保存相册 | 将分享图片保存到系统相册 | P1 | MVP |
| 历史记录 | 列表 | Session 列表 | 按时间排序展示历史酒局 | P0 | MVP |
| 历史记录 | 详情 | 报告查看 | 进入单次酒局报告详情 | P0 | MVP |
| 数据与同步 | 状态机 | 状态变迁 | active/paused/ended，终态不可回退 | P0 | MVP |
| 数据与同步 | 事件合并 | 时间优先 | 双端合并以最新事件时间为准 | P0 | MVP |
| 数据模型 | Session | 必须字段 | start/end/state/ended_reason/totals/heart_rate_summary | P0 | MVP |
| 数据模型 | DrinkLog | 必须字段 | 时间、模板、酒精克数、心率窗口统计 | P0 | MVP |
| 数据模型 | PeeLog | 必须字段 | 时间、可选心率 | P0 | MVP |
| 商业化 | TBD | TBD | 付费能力与增值功能（一次性买断方向） | P2 | 1.1 |
